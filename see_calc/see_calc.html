<!-----------------Imports GlowScript Libraries and NumJs------------------------>
<!--




-->

<!DOCTYPE html>



<!-- stuff for log in, doesn't work in debug environment so wait until very end-->
<!--
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<span id="log-in-status" style="color:white"></span>

<script>
var firebase_log_in = firebase


const fb_config_log_in = {
  apiKey: "AIzaSyDUuFHtA_-CFs90xbX-Z1Ros3QGwegFvcg",
  authDomain: "test-7af03.firebaseapp.com",
  databaseURL: "https://test-7af03-default-rtdb.firebaseio.com",
  projectId: "test-7af03",
  storageBucket: "test-7af03.appspot.com",
  messagingSenderId: "772660129335",
  appId: "1:772660129335:web:79af91672aff96686159b2",
  measurementId: "G-D312DPNMBZ"
};

  // Initialize Firebase
  firebase_log_in.initializeApp(fb_config_log_in);



// Check if the user is already logged in on page load
firebase_log_in.auth().onAuthStateChanged(function(user) {
  if (user) {
    // User is signed in
    $("#sign-in")[0].style.display = "none"
    $("#save-field")[0].style.display = ""
    $("#save-button")[0].style.display = ""
    $("#sign-out")[0].style.display = ""
    $("#log-in-status")[0].innerText = user.email
    console.log("IN :D")
    console.log(user.email);
    // Do something with the logged-in user, e.g., display user info
  } else {
    $("#sign-out")[0].style.display = "none"
    $("#sign-in")[0].style.display = ""
    $("#save-field")[0].style.display = "none"
    $("#save-button")[0].style.display = "none"
    $("#log-in-status")[0].innerText = ""
    // No user is signed in
    console.log("User is not logged in");
  }
});



// Sign out the current user
function signOutUser() {
  firebase_log_in.auth().signOut().then(function() {
    // Sign-out successful.
    console.log("User signed out");
    // Perform any additional actions after sign-out if needed
  }).catch(function(error) {
    // An error happened.
    console.error(error);
  });
}



// Sign in with Google
function signInWithGoogle() {
  var provider = new firebase_log_in.auth.GoogleAuthProvider();
  firebase_log_in.auth().signInWithPopup(provider).then(function(result) {
    // User signed in successfully
    var user = result.user;
    console.log(user.email);
    // alert(`logged in as ${user.email}`);
  }).catch(function(error) {
    // Handle errors
    console.error(error);
  });
}



// Add a button in your HTML to trigger the sign-in
</script>
-->

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">



<link type="text/css" href="https://www.glowscript.org/css/redmond/2.1/jquery-ui.custom.css" rel="stylesheet" />
<link type="text/css" href="https://www.glowscript.org/css/ide.css" rel="stylesheet" />
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script src="https://cdn.jsdelivr.net/gh/nicolaspanel/numjs@0.15.1/dist/numjs.min.js"></script>




<script type="text/javascript" src="https://www.glowscript.org/lib/jquery/2.1/jquery.min.js"></script>
<script type="text/javascript" src="https://www.glowscript.org/lib/jquery/2.1/jquery-ui.custom.min.js"></script>
<script type="text/javascript" src="https://www.glowscript.org/package/glow.3.0.min.js"></script>
<script type="text/javascript" src="https://www.glowscript.org/package/RSrun.3.0.min.js"></script>





<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/10.6.4/math.js"></script>
<script src="https://cdn.jsdelivr.net/pyodide/v0.20.0/full/pyodide.js"></script>  


<!-- not needed since its imported in worker, only including it so i can use it in the debugger-->




<!-- firebase-->
<script src="https://www.gstatic.com/firebasejs/3.5.2/firebase.js"></script>

<!-- mathquill -->
<link rel="stylesheet" href="mathquill/mathquill.css"/>
<!-- interferes with GS and it looks like mathquill doesnt require it (i think as long as it has the other jquery version)-->
<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>-->
<script src="mathquill/mathquill.js"></script>


<!-- nerdamer just used to convert from latex -->
<script src="nerdamer/all.min.js"></script>



<link rel="stylesheet" href="main.css"/>
<link rel="stylesheet" href="calc_blocks.css"/>

<div id="page-not-found">

    
    <div class="container">
        <h1>Page Not Found</h1>
        <p>The sheet you're looking for isn't available, it might have been moved or deleted.</p>
        <p>Sorry :\</p>
    </div>
</div>
    









<!-- Your Firebase Config -->
<script>







// Add a button in your HTML to trigger the sign-in
</script>


<!--
<img class="menu-symbol-img" src='icons/arrow-rotate-left-solid-gray.svg' onmouseover="this.src='icons/arrow-rotate-left-solid-white.svg';" onmouseout="this.src='icons/arrow-rotate-left-solid-gray.svg';" />
      <img class="menu-symbol-img" src='icons/arrow-rotate-right-solid-gray.svg' onmouseover="this.src='icons/arrow-rotate-right-solid-white.svg';" onmouseout="this.src='icons/arrow-rotate-right-solid-gray.svg';" />

-->



<div id="top-menu">

    <button  id="toggle-blocks" class="menu-text" onclick="toggle_blocks()">Hide</button>

    <button  class="menu-text" onclick="undo()">
      Undo


    </button>

    <button  id="run-button" class="menu-text" onclick="run_sheet()">
      Run
    </button>

    <button  class="menu-text" onclick="redo()"> 
      Redo

    </button>

    <input style="height:100%" id="save-field" placeholder="Sheet name">

    <button  class="menu-text" onclick="save_sheet()" id="save-button">Save</button>

    <button  class="menu-text visual-toggle" onclick="ortho_xy()" style="display:none">XY</button>

    <button  style="float:right" class="menu-text" onclick="toggle_solve_steps(event)" id="toggle-solve-steps" style="display:none">Solve Steps</button>
    
    <button  style="float:right" class="menu-text" onclick="toggle_library(event)">Library</button>
    
     


    <button style="display:none; float:right" id="sign-in" class="menu-text" onclick="signInWithGoogle()" >Sign in with Google</button>
    <button style="display:none; float:right" id="sign-out" class="menu-text" onclick="signOutUser()">Sign out</button>




</div>




<div id="popup">


    <table id="search-box" style="display: none;">

        <tr>
            <td class="search-title">
                Block Name
            </td>
            <td class="search-title">
                Variable Name
            </td>
        </tr>
        <tr>
            <td id="search-block">
            </td>
    
    
            <td id="search-var">
    
            </td>
        </tr>
    </tr>
    </table>
    

    <div id="solve-steps" style="display: none;margin:10px">

    </div>

    <div id="load" style="display:block">
        
        
        <div id="logged_out" style="display: none;">
            <div>
                <span>Username</span>
                <input id="username">
            </div>
            <span>
                <button>Create Account</button>
                <button onclick="log_in()">Log In</button>
            </span>
            <br>
        </div>

        <div id="logged_in" style="display: none;">
            <button onclick="log_out()">Log Out</button>
            <br>
            

        </div>


        
        <div id="user-content"></div>
        <div id="library"></div>
        
    </div>



</div>




<div id="calc"></div>




<div id="vis"></div>



    




<div id="eqn-tree" style="background-color: white;"></div>

<!-- regex library -->
<script src="https://cdn.jsdelivr.net/npm/verbal-expressions@1.0.2/dist/verbalexpressions.min.js"></script>

<!-- database of visuals -->
<script src="vis_database.js"></script>

<script src="latex_conversions.js"></script>

<script src="treant-js-master\vendor\raphael.js"></script>
<script src="treant-js-master\Treant.js"></script>
<link rel="stylesheet" href="treant-js-master\Treant.css">

<script src="UI_tree.js"></script>
<script src="cas.js"></script>
<script src="solver.js"></script>
<script src="compute_sheet.js"></script>
<script src="see_calc.js"></script>

<script src="testing.js"></script>

<script src="test.js"></script>