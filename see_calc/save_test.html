<div id="main"><input id="in" value="hi"></div>
<textarea id="textbox">Type something here</textarea>
<button id="create">Create file</button>
<a download="info.txt" id="downloadlink" style="display: block">Download</a>


<input type="file" id="file-input" />
<h3>Contents of the file:</h3>
<pre id="file-content"></pre>

<script>
    (function () {
    var textFile = null,
    makeTextFile = function (text) {
        var data = new Blob([text], {type: 'text/plain'});

        // If we are replacing a previously generated file we need to
        // manually revoke the object URL to avoid memory leaks.
        if (textFile !== null) {
        window.URL.revokeObjectURL(textFile);
        }

        textFile = window.URL.createObjectURL(data);

        return textFile;
    };


    var create = document.getElementById('create'),
        textbox = document.getElementById('textbox');

    create.addEventListener('click', function () {
        var link = document.getElementById('downloadlink');
        link.download = textbox.value
        console.log(document.getElementById('main').innerHTML)
        link.href = makeTextFile(document.getElementById('main').innerHTML);
        link.style.display = 'block';
    }, false);
    })();









    function readSingleFile(e) {
        var file = e.target.files[0];
        if (!file) {
            return;
        }
        var reader = new FileReader();
        reader.onload = function(e) {
            var contents = e.target.result;
            displayContents(contents);
        };
        reader.readAsText(file);
        }

        function displayContents(contents) {
            console.log(contents)
            document.body.innerHTML=contents
        //var element = document.getElementById('file-content');
        //element.textContent = contents;
        }

        document.getElementById('file-input')
        .addEventListener('change', readSingleFile, false);
</script>

