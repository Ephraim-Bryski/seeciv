{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\brisk\\\\OneDrive\\\\Documents\\\\GitHub\\\\seeciv\\\\my-app\\\\src\\\\App.js\";\nimport React, { useState } from \"react\";\nimport { addStyles, EditableMathField, StaticMathField } from \"react-mathquill\";\nimport nerdamer from 'nerdamer/nerdamer.core.js';\nimport 'nerdamer/Algebra.js';\nimport 'nerdamer/Calculus.js';\nimport 'nerdamer/Solve.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\naddStyles();\n\nfunction splitSolveFor(text) {\n  try {\n    var splitEnd = text.split(\")\");\n    var main = splitEnd[0];\n    var splitMain = main.split(\"(\");\n    var solveFor = splitMain[0];\n    var inTermsOfText = splitMain[1];\n    var inTermsOf = inTermsOfText.split(\",\");\n    return [solveFor, inTermsOf];\n  } catch {\n    return [text.split(\"(\")[0], []];\n  }\n}\n\nfunction solveEqns(eqnsIn, solveFor, inTermsOf) {\n  /* additional stuff:\n  parse equations (check for one equality, operations, and variables and that's it)\n  check if no contradiction in equations\n  check if infinite solutions (a==a shouldn't return 0)\n  check if solveVars are in equations\n  if solveFor is empty, just use solveEquations\n  deal with multiple solutions when substituting (like quadratics)\n    systems([\"x=4*a+b\",\"b=2*a\"],\"b\",[\"a\",\"x\"]) returns \"b=-4*a+x\" (ignores the next equation)\n  instead it should keep on going and throw error if there's ever too few variables\n  */\n  if (solveFor.length === 0) {\n    if (eqnsIn.length === 1) {\n      eqnsIn = eqnsIn[0];\n    } // if single equation, nerdamer requires string, not array\n\n\n    try {\n      var sol = nerdamer.solveEquations(eqnsIn).toString(); // need to have it access all equations instead!\n\n      if (sol === \"\") {\n        return \"Blank Line (or it cant solve)\";\n      }\n    } catch {\n      return \"Cannot Solve\";\n    } // variable name is not included in array if there's only one variable ):\n\n\n    if (!sol.includes(\",\")) {\n      sol = nerdamer(eqnsIn).variables()[0].concat(\",\").concat(sol);\n    }\n\n    var splitSol = sol.split(\",\");\n    var eqnSol = [];\n\n    for (let i = 0; i < splitSol.length / 2; i++) {\n      eqnSol.push(splitSol[2 * i].concat(\"=\").concat(splitSol[2 * i + 1]));\n    }\n\n    return eqnSol;\n  }\n\n  var eqns = [[]];\n\n  for (let i = 0; i < eqnsIn.length; i++) {\n    eqns[0][i] = nerdamer(eqnsIn[i]);\n  } //var solveFor=\"a\" // for now you must specify what to solve in terms of\n  //var inTermsOf=[\"b\"]\n\n\n  var solveVars = [solveFor, inTermsOf].flat(); // function will return the single equation which will then be solved for\n\n  var nEqns = eqns[0].length;\n\n  for (var i = 0; i < nEqns - 1; i++) {\n    var eqn = eqns[i][i]; //var eqn=nerdamer('simplify('.concat(eqns[i][i]).concat(')'))\n\n    var eqnVars = eqn.variables();\n    var solution;\n    var subVars = excess(eqnVars, solveVars);\n\n    if (subVars === undefined) {\n      // this means there's no additional variables in the equation\n      if (excess(solveVars, eqnVars) === undefined) {\n        // solveVars and eqnVars are equivalent\n        solution = eqn;\n        break;\n      } else {\n        return 'error: too many variables to solve in terms of';\n      }\n    }\n\n    var subVar = subVars[0];\n    console.log(eqnVars);\n    console.log(solveVars);\n    console.log(subVars);\n    console.log(subVar);\n    var solvedEqn = eqn.solveFor(subVar);\n    eqns[i + 1] = [];\n\n    for (var j = 0; j < nEqns - i - 1; j++) {\n      eqns[i + 1][i + 1 + j] = eqns[i][i + 1 + j].sub(subVar, solvedEqn);\n    }\n  }\n\n  if (solution === undefined) {\n    // solution hasn't already been found OR only one eqn\n    var finalEqn = eqns[nEqns - 1][nEqns - 1];\n    var solutionVars = finalEqn.variables();\n\n    if (excess(solveVars, solutionVars) !== undefined) {\n      return 'error: end too many variables to solve in terms of';\n    } else if (excess(solutionVars, solveVars) !== undefined) {\n      return 'error: end too few variables to solve in terms of';\n    } else {\n      solution = finalEqn;\n    }\n  }\n\n  function excess(A, B) {\n    // if it's one variable, nerdamer doesn't use an array, so this puts it in an array:\n    if (typeof A === \"string\") {\n      A = [A];\n    }\n\n    if (typeof B === \"string\") {\n      B = [B];\n    }\n\n    return A.find(itemTestExtra => B.every(itemCompare => {\n      return itemTestExtra !== itemCompare;\n    }));\n  }\n\n  return solveFor.concat(\"=\").concat(solution.solveFor(solveFor).toString());\n}\n\nfunction computeSheet(sheetData) {\n  // do a check for duplicate names\n  // for now system names must be in order ):\n  var newSheetData = sheetData; // clear all of the previous results:\n\n  for (let i = 0; i < sheetData.length; i++) {\n    var system = sheetData[i];\n\n    for (let j = 0; j < system.eqns.length; j++) {\n      newSheetData[i].eqns[j].result = \"\";\n    }\n  }\n\n  var hitError = false;\n  var usedNames = [];\n\n  for (let i = 0; i < sheetData.length; i++) {\n    var SoE = sheetData[i];\n    var eqns = SoE.eqns;\n\n    for (let j = 0; j < eqns.length; j++) {\n      try {\n        var eqn = nerdamer.convertFromLaTeX(eqns[j].eqn).toString();\n      } catch {\n        var eqn = \"NOPE\";\n      }\n\n      var result;\n\n      if (eqn === \"\") {\n        continue;\n      }\n\n      var solveForLaTeX;\n      var inTermsOfLaTeX;\n      var inTermsOf = [];\n      var solveFor;\n\n      if (eqns[j].solveText === null) {\n        var solveText = \"\";\n      } else {\n        var solveText = eqns[j].solveText;\n      }\n\n      [solveForLaTeX, inTermsOfLaTeX] = splitSolveFor(solveText);\n\n      try {\n        var solveFor = nerdamer.convertFromLaTeX(solveForLaTeX).toString();\n      } catch {\n        var solveFor = \"\";\n      }\n\n      for (let j = 0; j < inTermsOfLaTeX.length; j++) {\n        try {\n          inTermsOf.push(nerdamer.convertFromLaTeX(inTermsOfLaTeX[j]).toString());\n        } catch {\n          inTermsOf.push(\"\");\n        }\n      } //[solveFor,inTermsOf]=splitSolveFor(solveText)\n      // check if reference:\n\n\n      if (!eqn.includes(\"=\")) {\n        // check if a name on sheet:\n        if (!usedNames.includes(eqn)) {\n          result = \"TEXTerror: \".concat(eqn).concat(\" has not been defined\");\n          hitError = true;\n        } else if (usedNames.includes(eqn)) {\n          var names = [];\n\n          for (let i = 0; i < sheetData.length; i++) {\n            names.push(sheetData[i].name);\n          }\n\n          var iRef = names.findIndex(name => name === eqn);\n          var system = [];\n\n          for (let i = 0; i < sheetData[iRef].eqns.length; i++) {\n            system.push(sheetData[iRef].eqns[i].result);\n          }\n\n          if (eqns[j].operation === \"solve\") {\n            result = solveEqns(system, solveFor, inTermsOf);\n          } else {\n            result = system;\n          }\n        }\n      } else if (eqns[j].operation === \"solve\") {\n        result = solveEqns([eqn], solveFor, inTermsOf);\n      } else {\n        result = eqn;\n      }\n\n      newSheetData[i].eqns[j].result = result;\n\n      if (hitError) {\n        return newSheetData;\n      }\n\n      usedNames.push(SoE.name);\n    }\n  }\n\n  return newSheetData;\n}\n\nclass Sheet extends React.Component {\n  // constructor has states with sheet info?\n  constructor(props) {\n    super(props);\n    this.state = {\n      SoEs: [{\n        name: \"s\",\n        eqns: [{\n          eqn: \"\\\\rho_d=\\\\frac{m_s}{V}\",\n          operation: \"\",\n          solveText: null,\n          result: \"\"\n        }, {\n          eqn: \"\\\\rho=\\\\frac{m}{V}\",\n          operation: \"\",\n          solveText: null,\n          result: \"\"\n        }, {\n          eqn: \"m=m_w+m_s\",\n          operation: \"\",\n          solveText: null,\n          result: \"\"\n        }, {\n          eqn: \"\\\\omega=\\\\frac{m_w}{m_s}\",\n          operation: \"\",\n          solveText: null,\n          result: \"\"\n        }]\n      }, {\n        name: \"SoE 2\",\n        eqns: [{\n          eqn: \"s\",\n          operation: \"solve\",\n          solveText: \"\\\\rho_d\\\\left(\\\\rho,\\\\omega\\\\right)\",\n          result: \"\"\n        }]\n      }]\n    };\n  }\n\n  render() {\n    var sheetElements = [];\n\n    for (let i = 0; i < this.state.SoEs.length; i++) {\n      var SoE = this.state.SoEs[i]; //this.SoEs[i].name=newName\n\n      sheetElements.push( /*#__PURE__*/_jsxDEV(Name, {\n        onEdit: newName => {\n          // should just appl\n          this.state.SoEs[i].name = newName;\n          this.setState({\n            SoEs: computeSheet(this.state.SoEs)\n          });\n        },\n        text: SoE\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 29\n      }, this));\n\n      for (let j = 0; j < SoE.eqns.length; j++) {\n        sheetElements.push( /*#__PURE__*/_jsxDEV(Line, {\n          onEdit: newEqn => {\n            this.state.SoEs[i].eqns[j] = newEqn;\n            this.setState({\n              SoEs: computeSheet(this.state.SoEs)\n            });\n          },\n          addLine: () => {\n            var blankLine = {\n              eqn: \"\",\n              operation: \"\",\n              solveText: null,\n              result: \"\"\n            };\n            this.state.SoEs[i].eqns.splice(j + 1, 0, blankLine);\n            this.setState({\n              SoEs: this.state.SoEs\n            });\n          },\n          removeLine: () => {\n            var blankLine = {\n              eqn: \"\",\n              result: \"\"\n            };\n            this.state.SoEs[i].eqns.splice(j, 1);\n            this.setState({\n              SoEs: this.state.SoEs\n            });\n          },\n          eqnData: SoE.eqns[j]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 32\n        }, this));\n      }\n    } //console.log(this.state.SoEs)\n\n\n    return sheetElements;\n  }\n\n}\n\nclass Name extends React.Component {\n  render() {\n    //const name=<tr><td></td></tr>\n    const editField = /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: this.props.text.name,\n      onChange: e => {\n        this.props.onEdit(e.target.value);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 22\n    }, this);\n\n    return /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: /*#__PURE__*/_jsxDEV(\"td\", {\n        children: editField\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nclass Line extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  breakUp(newText) {\n    var newEqnData = this.props.eqnData;\n    newEqnData.eqn = newText;\n\n    if (newText.includes(\"solve\")) {\n      newEqnData.operation = \"solve\";\n      newEqnData.eqn = newText.replace(\"solve\", \"\");\n    }\n\n    if (newText.includes(\"for\")) {\n      newEqnData.eqn = newText.replace(\"for\", \"\");\n      newEqnData.solveText = \"\";\n    }\n\n    return newEqnData;\n  }\n\n  render() {\n    var eqnData = this.props.eqnData;\n\n    if (eqnData.result.includes(\"TEXT\")) {\n      var resultDisplay = \"\\\\text{\".concat(eqnData.result.replace(\"TEXT\", \"\")).concat(\"}\");\n    } else {\n      if (typeof eqnData.result === \"string\") {\n        eqnData.result = [eqnData.result];\n      }\n\n      var resultDisplay = [];\n\n      for (let i = 0; i < eqnData.result.length; i++) {\n        resultDisplay.push( /*#__PURE__*/_jsxDEV(StaticMathField, {\n          children: nerdamer.convertToLaTeX(eqnData.result[i])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 11\n        }, this));\n        resultDisplay.push( /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 29\n        }, this));\n      }\n    }\n\n    var inputField = [];\n\n    var eqnField = /*#__PURE__*/_jsxDEV(EditableMathField, {\n      latex: this.props.eqnData.eqn,\n      onChange: newField => {\n        this.props.onEdit(this.breakUp(newField.latex()));\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 18\n    }, this);\n\n    var solveForField = /*#__PURE__*/_jsxDEV(EditableMathField, {\n      latex: this.props.eqnData.solveText,\n      onChange: newField => {\n        var newEqnData = this.props.eqnData;\n        newEqnData.solveText = newField.latex();\n        this.props.onEdit(newEqnData);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 23\n    }, this);\n\n    if (this.props.eqnData.operation === \"solve\") {\n      inputField.push( /*#__PURE__*/_jsxDEV(StaticMathField, {\n        children: \"\\\\text{solve }\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 23\n      }, this));\n    }\n\n    inputField.push(eqnField);\n\n    if (!(this.props.eqnData.solveText === null)) {\n      inputField.push( /*#__PURE__*/_jsxDEV(StaticMathField, {\n        children: \"\\\\text{for }\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 23\n      }, this));\n      inputField.push(solveForField);\n    }\n\n    const line = /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            this.props.addLine();\n          },\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            this.props.removeLine();\n          },\n          children: \"-\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 14\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: inputField\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: resultDisplay\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 10\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 17\n    }, this);\n\n    return line;\n  }\n\n}\n\nexport default Sheet;","map":{"version":3,"sources":["C:/Users/brisk/OneDrive/Documents/GitHub/seeciv/my-app/src/App.js"],"names":["React","useState","addStyles","EditableMathField","StaticMathField","nerdamer","splitSolveFor","text","splitEnd","split","main","splitMain","solveFor","inTermsOfText","inTermsOf","solveEqns","eqnsIn","length","sol","solveEquations","toString","includes","variables","concat","splitSol","eqnSol","i","push","eqns","solveVars","flat","nEqns","eqn","eqnVars","solution","subVars","excess","undefined","subVar","console","log","solvedEqn","j","sub","finalEqn","solutionVars","A","B","find","itemTestExtra","every","itemCompare","computeSheet","sheetData","newSheetData","system","result","hitError","usedNames","SoE","convertFromLaTeX","solveForLaTeX","inTermsOfLaTeX","solveText","names","name","iRef","findIndex","operation","Sheet","Component","constructor","props","state","SoEs","render","sheetElements","newName","setState","newEqn","blankLine","splice","Name","editField","e","onEdit","target","value","Line","breakUp","newText","newEqnData","eqnData","replace","resultDisplay","convertToLaTeX","inputField","eqnField","newField","latex","solveForField","line","addLine","removeLine"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { addStyles, EditableMathField, StaticMathField } from \"react-mathquill\";\nimport nerdamer from 'nerdamer/nerdamer.core.js'\nimport 'nerdamer/Algebra.js'\nimport 'nerdamer/Calculus.js'\nimport 'nerdamer/Solve.js'\n\naddStyles();\n\nfunction splitSolveFor(text){\n  try{\n    var splitEnd=text.split(\")\")\n    var main=splitEnd[0]\n\n    var splitMain=main.split(\"(\")\n\n    var solveFor=splitMain[0]\n    var inTermsOfText=splitMain[1]\n\n    \n    var inTermsOf=inTermsOfText.split(\",\")\n    return [solveFor,inTermsOf]\n  }catch{\n    return [text.split(\"(\")[0],[]]\n  }\n}\n\n\nfunction solveEqns(eqnsIn,solveFor,inTermsOf){\n\n  \n  /* additional stuff:\n  parse equations (check for one equality, operations, and variables and that's it)\n  check if no contradiction in equations\n  check if infinite solutions (a==a shouldn't return 0)\n  check if solveVars are in equations\n  if solveFor is empty, just use solveEquations\n  deal with multiple solutions when substituting (like quadratics)\n\n\n  systems([\"x=4*a+b\",\"b=2*a\"],\"b\",[\"a\",\"x\"]) returns \"b=-4*a+x\" (ignores the next equation)\n  instead it should keep on going and throw error if there's ever too few variables\n  */\n\n\n  \n  if (solveFor.length===0){\n    if (eqnsIn.length===1){eqnsIn=eqnsIn[0]} // if single equation, nerdamer requires string, not array\n\n    try {\n      var sol=nerdamer.solveEquations(eqnsIn).toString() // need to have it access all equations instead!\n      if (sol===\"\"){\n        return \"Blank Line (or it cant solve)\"\n      }\n    } catch {\n      return \"Cannot Solve\"\n    }\n    \n\n    \n\n    // variable name is not included in array if there's only one variable ):\n    if (!sol.includes(\",\")){\n      sol=nerdamer(eqnsIn).variables()[0].concat(\",\").concat(sol)\n    }\n   \n    var splitSol=sol.split(\",\")\n    var eqnSol=[]\n    for (let i=0;i<splitSol.length/2;i++){\n      eqnSol.push(\n        splitSol[2*i]\n        .concat(\"=\")\n        .concat(splitSol[2*i+1])\n      )\n\n\n    }\n    return eqnSol\n  }\n\n \n  \n  var eqns=[[]]\n  for (let i=0;i<eqnsIn.length;i++){\n      eqns[0][i]=nerdamer(eqnsIn[i])\n  }\n\n  //var solveFor=\"a\" // for now you must specify what to solve in terms of\n  //var inTermsOf=[\"b\"]\n  var solveVars=[solveFor,inTermsOf].flat()\n\n\n  // function will return the single equation which will then be solved for\n  var nEqns=eqns[0].length\n\n\n  for (var i=0;i<nEqns-1;i++){\n    var eqn=eqns[i][i]\n    //var eqn=nerdamer('simplify('.concat(eqns[i][i]).concat(')'))\n    \n    var eqnVars=eqn.variables()\n\n    \n\n    var solution\n\n\n    var subVars=excess(eqnVars,solveVars)\n    if (subVars===undefined){\n        // this means there's no additional variables in the equation\n        if (excess(solveVars,eqnVars)===undefined){\n          // solveVars and eqnVars are equivalent\n          solution=eqn\n          break\n        }else{\n          return 'error: too many variables to solve in terms of'\n        }\n\n    }\n\n    var subVar=subVars[0]\n    console.log(eqnVars)\n    console.log(solveVars)\n    console.log(subVars)\n    console.log(subVar)\n    var solvedEqn=eqn.solveFor(subVar)\n\n    eqns[i+1]=[]\n    for (var j=0;j<nEqns-i-1;j++){\n      eqns[i+1][i+1+j]=eqns[i][i+1+j].sub(subVar,solvedEqn)\n    } \n  \n  }\n\n  if (solution===undefined){  // solution hasn't already been found OR only one eqn\n    var finalEqn=eqns[nEqns-1][nEqns-1]\n    var solutionVars=finalEqn.variables()\n    if (excess(solveVars,solutionVars)!==undefined){\n      return 'error: end too many variables to solve in terms of'\n    }else if (excess(solutionVars,solveVars)!==undefined){\n      return 'error: end too few variables to solve in terms of'\n    }else{\n      solution=finalEqn\n    }\n  }\n\n  \n\n  function excess(A,B){\n      // if it's one variable, nerdamer doesn't use an array, so this puts it in an array:\n      if (typeof(A)===\"string\"){A=[A]}\n      if (typeof(B)===\"string\"){B=[B]}\n  \n      return A.find(\n          itemTestExtra=>B.every(\n          (itemCompare)=>{return itemTestExtra!==itemCompare}\n          )\n      )\n  }\n\n  \n  return solveFor.concat(\"=\").concat(solution.solveFor(solveFor).toString())\n}\n\n\n\nfunction computeSheet(sheetData){\n\n  // do a check for duplicate names\n\n  // for now system names must be in order ):\n\n  var newSheetData=sheetData\n\n  // clear all of the previous results:\n  for (let i=0;i<sheetData.length;i++){\n    var system=sheetData[i]\n    for (let j=0;j<system.eqns.length;j++){\n      newSheetData[i].eqns[j].result=\"\"  \n    }\n  }\n  \n  var hitError=false\n  var usedNames=[]\n  for (let i=0;i<sheetData.length;i++){\n    var SoE=sheetData[i]\n    var eqns=SoE.eqns\n    for (let j=0;j<eqns.length;j++){\n      try {\n        var eqn=nerdamer.convertFromLaTeX(eqns[j].eqn).toString()\n      } catch  {\n        var eqn=\"NOPE\"\n      }\n      \n      var result\n\n      if(eqn===\"\"){\n        continue\n      }\n\n      var solveForLaTeX\n      var inTermsOfLaTeX\n      var inTermsOf=[]\n      var solveFor\n      if (eqns[j].solveText===null){var solveText=\"\"}\n      else {var solveText=eqns[j].solveText}\n\n      \n      [solveForLaTeX,inTermsOfLaTeX]=splitSolveFor(solveText)\n      \n      \n      try{\n        var solveFor=nerdamer.convertFromLaTeX(solveForLaTeX).toString()\n      }catch{\n        var solveFor=\"\"\n      }\n\n      \n      for (let j=0;j<inTermsOfLaTeX.length;j++){\n\n       try{\n          inTermsOf.push(nerdamer.convertFromLaTeX(inTermsOfLaTeX[j]).toString())\n        }catch{\n          inTermsOf.push(\"\")\n        }\n        \n      }\n\n\n      //[solveFor,inTermsOf]=splitSolveFor(solveText)\n\n      // check if reference:\n      if (!eqn.includes(\"=\")){\n        // check if a name on sheet:\n        if (!usedNames.includes(eqn)){\n            result=(\"TEXTerror: \").concat(eqn).concat(\" has not been defined\")\n            hitError=true\n        }else if (usedNames.includes(eqn)){\n\n          var names=[]\n          for (let i=0;i<sheetData.length;i++){names.push(sheetData[i].name)}\n          var iRef=names.findIndex((name)=>name===eqn)\n\n          var system=[]\n          for (let i=0;i<sheetData[iRef].eqns.length;i++){system.push(sheetData[iRef].eqns[i].result)}\n          if (eqns[j].operation===\"solve\"){\n            result=solveEqns(system,solveFor,inTermsOf)\n          }else{\n            result=system\n          }\n        }\n      }else if(eqns[j].operation===\"solve\"){\n        result=solveEqns([eqn],solveFor,inTermsOf)\n      }else{\n        result=eqn\n      }\n      newSheetData[i].eqns[j].result=result\n      if (hitError){\n        return newSheetData\n      }\n      usedNames.push(SoE.name)\n    }\n  }\n\n  return newSheetData\n}\n\n\nclass Sheet extends React.Component {\n  // constructor has states with sheet info?\n  constructor(props){\n    super(props)\n\n    this.state= {\n        SoEs:[\n         {\n             name:\"s\",\n             \n             eqns: [\n              {eqn: \"\\\\rho_d=\\\\frac{m_s}{V}\", operation: \"\", solveText: null, result: \"\"},\n              {eqn: \"\\\\rho=\\\\frac{m}{V}\", operation: \"\", solveText: null, result: \"\"},\n              {eqn: \"m=m_w+m_s\", operation: \"\", solveText: null, result: \"\"},\n              {eqn: \"\\\\omega=\\\\frac{m_w}{m_s}\", operation: \"\", solveText: null, result:\"\"}\n             ]\n         },\n         {\n             name:\"SoE 2\",\n             eqns: [\n              {eqn: \"s\", operation: \"solve\", solveText: \"\\\\rho_d\\\\left(\\\\rho,\\\\omega\\\\right)\", result:\"\"}\n                 \n             ]\n         }\n     ]\n    }\n  }\n\n\n  render(){\n     var sheetElements=[]\n     for (let i=0;i<this.state.SoEs.length;i++){\n         var SoE=this.state.SoEs[i]\n         //this.SoEs[i].name=newName\n\n         sheetElements.push(<Name \n         \n             onEdit={(newName)=>\n                 {\n                    // should just appl\n                    this.state.SoEs[i].name=newName\n\n\n                    this.setState({SoEs: computeSheet(this.state.SoEs)})\n                    \n                 }\n             } \n             text={SoE}\n         />)\n\n        \n\n         for (let j=0;j<SoE.eqns.length;j++){\n            sheetElements.push(<Line \n              onEdit={\n                (newEqn)=>\n                {this.state.SoEs[i].eqns[j]=newEqn\n                  this.setState({SoEs: computeSheet(this.state.SoEs)})\n                }\n              }\n              addLine={()=>\n                {\n                  var blankLine={eqn:\"\",operation:\"\",solveText: null,result:\"\"}\n                  this.state.SoEs[i].eqns.splice(j+1, 0, blankLine)\n\n                  this.setState({SoEs: this.state.SoEs})\n                }\n              }\n              removeLine={()=>\n                {\n                  var blankLine={eqn:\"\",result:\"\"}\n                  this.state.SoEs[i].eqns.splice(j, 1)\n\n                  this.setState({SoEs: this.state.SoEs})\n                }\n              }\n              \n              \n              \n               \n              eqnData={SoE.eqns[j]}             \n            />)\n         }\n     }\n     //console.log(this.state.SoEs)\n     return(\n      sheetElements\n     )\n \n  }\n}\n\n\nclass Name extends React.Component {\n render(){\n     //const name=<tr><td></td></tr>\n     const editField=<input \n         type=\"text\" \n         value={this.props.text.name} \n         onChange={(e)=>{this.props.onEdit(e.target.value)\n         }\n         \n     }\n     >\n     </input>\n\n     return <tr><td>{editField}</td></tr>\n } \n}\n\nclass Line extends React.Component {\n  constructor(props){\n    super(props)\n    \n  }\n\n  breakUp(newText){\n    var newEqnData=this.props.eqnData\n    newEqnData.eqn=newText\n    if(newText.includes(\"solve\")){\n      newEqnData.operation=\"solve\"\n      newEqnData.eqn=newText.replace(\"solve\",\"\")  \n    }\n    if(newText.includes(\"for\")){\n      newEqnData.eqn=newText.replace(\"for\",\"\")\n      newEqnData.solveText=\"\"\n    }\n\n\n    return newEqnData\n  }\n\n  render() {\n\n\n    var eqnData=this.props.eqnData\n\n     if (eqnData.result.includes(\"TEXT\")){\n       var resultDisplay=\"\\\\text{\".concat(eqnData.result.replace(\"TEXT\",\"\")).concat(\"}\")\n     }else{\n\n       if (typeof eqnData.result===\"string\"){\n         eqnData.result=[eqnData.result]\n       }\n       var resultDisplay=[]\n\n       for (let i=0;i<eqnData.result.length;i++){\n         \n         resultDisplay.push(\n          <StaticMathField>\n            {nerdamer.convertToLaTeX(eqnData.result[i])}\n          </StaticMathField>,\n         )\n         resultDisplay.push(<br/>)\n       }\n\n     }\n\n\n    var inputField=[]\n    \n\n    var eqnField=<EditableMathField\n      latex={this.props.eqnData.eqn}\n      onChange={(newField)=>{this.props.onEdit(this.breakUp(newField.latex()))}}\n    />\n\n    var solveForField=<EditableMathField\n      latex={this.props.eqnData.solveText}\n      onChange={(newField)=>{\n        var newEqnData=this.props.eqnData\n        newEqnData.solveText=newField.latex()\n        this.props.onEdit(newEqnData)\n      }}\n    />\n\n\n\n\n    if (this.props.eqnData.operation===\"solve\"){\n      inputField.push(<StaticMathField>{\"\\\\text{solve }\"}</StaticMathField>)\n    }\n    inputField.push(eqnField)\n    if (!(this.props.eqnData.solveText===null)){\n      inputField.push(<StaticMathField>{\"\\\\text{for }\"}</StaticMathField>)\n      inputField.push(solveForField)\n    }\n    \n\n\n\n\n     const line=<tr> \n        <td>\n           <button onClick={\n              ()=>{this.props.addLine()}\n             }>+</button>\n             <button onClick={\n               ()=>{this.props.removeLine()}\n             }>-</button>\n         </td>\n         <td>\n         {inputField}\n         </td>\n         <td>\n            {resultDisplay}\n         </td>\n         \n     </tr>\n\n\n      return line\n }\n}\n\nexport default Sheet\n\n"]},"metadata":{},"sourceType":"module"}